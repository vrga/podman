---
package_source:
  Debian:
    key:  "https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_{{ ansible_distribution_version }}/Release.key"
    repo: "https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_{{ ansible_distribution_version }}/"
  Ubuntu:
    key:  "https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_{{ ansible_distribution_version }}/Release.key"
    repo: "https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/xUbuntu_{{ ansible_distribution_version }}/"


role_data_dir:          /etc/containers/ansible_podman

containers_policy:
  default:
    - type: reject
  transports:
    docker:
      docker.io:
        - type: insecureAcceptAnything

registries:
  search:
    - docker.io
  insecure: []
  block: []

cni_networking:
  - filename: 87-podman-bridge
    data:
      cniVersion: 0.4.0
      name:       podman
      plugins:
        - type:      bridge
          bridge:    cni-podman0
          isGateway: true
          ipMasq:    true
          ipam:
            type: host-local
            routes:
              - dst: 0.0.0.0/0
            ranges:
              - - subnet:  10.88.0.0/16
                  gateway: 10.88.0.1
        - type: portmap
          capabilities:
            portMappings: true
        - type:    firewall
          backend: iptables

containers: []
# containers example:
# containers:
#   - name: pihole
#     image: docker.io/pihole/pihole:latest
#     network: podman
#     user: 20001
#     group: 20001
#     exposes:
#       - 10.88.1.1:53:53/tcp
#       - 10.8.1.1:53:53/udp
#       - 10.88.1.1:8091:80
#       - 10.88.1.1:8092:443
#     container_environment:
#       - ServerIP="10.88.1.1"
#       - DNS1="1.1.1.1"
#       - DNS2="8.8.8.8"
#       - VIRTUAL_HOST="pihole.testing.lan"
#     mounts:
#       - /etc/localtime:/etc/localtime:ro
#       - /etc/timezone:/etc/timezone:ro
#       - /opt/pihole/etc/pihole/:/etc/pihole/
#       - /opt/pihole/etc/dnsmasq.d/:/etc/dnsmasq.d/

container_storage_root: "/opt/"
storage_root:           "/var/lib/containers/storage/"
container_dirs: []
systemd_containers:     no
